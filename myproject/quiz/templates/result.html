{% extends "spirit/_base.html" %}
{% load i18n %}

{% load quiz_tags %}

{% block title %} {{ quiz.title}} {% endblock %}

{% block content %}
<style scoped>
    table {
        color: #333;
        font-family: Helvetica, Arial, sans-serif;
        width: 640px;
        border-collapse: collapse;
        border-spacing: 0;
    }

    td, th {
        border: 1px solid transparent; /* No more visible border */
        height: 30px;
        transition: all 0.3s; /* Simple transition for hover effect */
    }

    th {
        /* Gradient Background */
        background: linear-gradient(#444 0%,#555 100%);
        color: #FFF;
        font-weight: bold;
        height: 40px;
    }

    td {
        background: #FAFAFA;
        text-align: center;
    }

    /* Cells in even rows (2,4,6...) are one color */
    tr:nth-child(odd) td {
        background: #EEE;
    }

    /* Cells in odd rows (1,3,5...) are another (excludes header cells)  */
    tr:nth-child(even) td {
        background: #FDFDFD;
    }

    .text-muted {
        color: #777;
    }

    .alert {
        padding: 15px;
        margin-bottom: 20px;
        border: 1px solid transparent;
        border-radius: 4px;
    }

    .alert-success {
        color: #3c763d;
        background-color: #dff0d8;
        border-color: #d6e9c6;
    }

        .alert-success hr {
            border-top-color: #c9e2b3;
        }

        .alert-success .alert-link {
            color: #2b542c;
        }

    .alert-warning {
        color: #8a6d3b;
        background-color: #fcf8e3;
        border-color: #faebcc;
    }

    .well {
        min-height: 20px;
        padding: 19px;
        margin-bottom: 20px;
        background-color: #f5f5f5;
        border: 1px solid #e3e3e3;
        border-radius: 4px;
        -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, .05);
        box-shadow: inset 0 1px 1px rgba(0, 0, 0, .05);
    }

    .lead {
        margin-bottom: 20px;
        font-size: 18px;
        font-weight: 300;
        line-height: 1.4;
    }

    .list-group {
        padding-left: 0;
        margin-right: 0.5em;
        margin-bottom: 20px;
    }
</style>
<div>
    {% if previous.answers %}

    <p class="muted"><small>{% trans "The previous question" %}:</small></p>
    <p>{{ previous.previous_question }}</p>
    <p>
        Your answer was
        <strong>
            {{ previous.previous_outcome|yesno:"correct,incorrect" }}
        </strong>
    </p>
    {% include 'correct_answer.html' %}
    <p><strong>{% trans "Explanation" %}:</strong></p>
    <div class="well " style="background-color: #fcf8e3;">
        <p>{{ previous.previous_question.explanation|safe }}</p>
    </div>
    <hr>
    {% endif %}

    {% if max_score %}

    <div>
        <h2>{% trans "Exam results" %}</h2>
        <p>
            <small class="muted">{% trans "Exam title" %}: </small>
            <strong>{{ quiz.title }}</strong>
        </p>
        <p class="lead">
            {% trans "You answered" %} {{ score }} {% trans "questions correctly out of" %} {{ max_score }}, {% trans "giving you" %} {{ percent }} {% trans "percent correct" %}
        </p>
        {% if quiz.pass_mark %}
        <hr>
        <p class="lead">{{ sitting.result_message }}</p>
        <hr>
        {% endif %}

        <p>{% trans "Review the questions below and try the exam again in the future"%}.</p>
        {% if user.is_authenticated %}

        <p>{% trans "The result of this exam will be stored in your progress section so you can review and monitor your progression" %}.</p>
        {% endif %}
    </div>

    {% endif %}


    <hr>
    {% if possible %}

    <p class="lead">
        {% trans "Your session score is" %} {{ session }} {% trans "out of a possible" %} {{ possible }}
    </p>
    <hr>
    {% endif %}

    {% if questions %}

    {% for question in questions %}

    <p class="lead">
        {{ question.content|safe }}
    </p>
    {% correct_answer_for_all question %}

    {% if question.user_answer %}
    <p>{% trans "Your answer" %}: {{ question|answer_choice_to_string:question.user_answer }}</p>
    {% endif %}

    <p><strong>{% trans "Explanation" %}:</strong></p>
    <div class="well " style="background-color: #fcf8e3;">
        <p>{{ question.explanation|safe }}</p>
    </div>
    <hr>
    {% endfor %}

    {% endif %}
</div>

{% endblock %}
